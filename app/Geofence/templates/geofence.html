{%extends "base.html"%}

{% block head %}
<title>Geofence</title>
<link rel="stylesheet" href="{{ url_for('Geofence.static', filename='css/geofence.css') }}" />
<script defer src="{{ url_for('Geofence.static', filename='js/geofence.js') }}"></script>
{% endblock %}

{% block h1 %}
Creation of Geofence
{% endblock %}

{% block block_container %}
<div class="geofence-layout">
    <!-- Left Panel -->
    <div class="geofence-panel">
        <h2>Add Geofence</h2>
        <form id="geofenceForm">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <input type="hidden" name="shapeData" id="shapeData" />

            <div class="form-group">
                <input type="text" name="GeofenceName" id="GeofenceName" placeholder="Enter Geofence Name" required>
            </div>

            <div class="form-group">
                <input type="text" name="Location" id="Location" placeholder="Enter Location">
            </div>

            <div class="btn-toggle">
                <button type="button" id="circleBtn" class="toggle-btn active">Circle</button>
                <button type="button" id="polygonBtn" class="toggle-btn">Polygon</button>
                <button type="button" id="rectangleBtn" class="toggle-btn">Rectangle</button>
            </div>

            <div id="circleControls" class="shape-controls">
                <label for="radiusSlider">Radius (meters): <span id="radiusValue">1000</span></label>
                <input type="range" id="radiusSlider" min="100" max="5000" value="1000" step="100">
            </div>

            <div id="rectangleControls" class="shape-controls" style="display: none;">
                <label>Draw rectangle on map by clicking and dragging</label>
            </div>

            <div id="polygonControls" class="shape-controls" style="display: none;">
                <label>Click on map to place polygon points. Double-click to complete.</label>
            </div>

            <h3 class="section-title">Alert Settings</h3>
            <label class="switch-label">
                <input type="checkbox" id="enterAlert" name="alertType" value="enter">
                <span class="switch"></span>
                Alert when vehicle enters geofence
            </label>
            <label class="switch-label">
                <input type="checkbox" id="leaveAlert" name="alertType" value="leave">
                <span class="switch"></span>
                Alert when vehicle leaves geofence
            </label>

            <button type="submit" class="confirm-btn">Save Geofence</button>
        </form>

        <hr>

        <h3 class="section-title">Saved Geofences</h3>
        <div class="saved-geofences-container">
            <ul id="geofenceList" class="geofence-list"></ul>
        </div>
    </div>

    <div class="map-container">
        <div id="map"></div>
    </div>
</div>
{% endblock %}