{%extends "base.html"%}

{% block head %}
<title>Geofence</title>
<link rel="stylesheet" href="{{ url_for('Geofence.static', filename='css/geofence.css') }}" />
<script type="module" src="{{ url_for('Geofence.static', filename='js/geofence.js') }}"></script>
{% endblock %}

{% block h1 %}
Creation of Geofence
{% endblock %}

{% block block_container %}
<div class="geofence-layout">
    <!-- Left Panel -->
    <div class="geofence-panel">
        <h2>Add Geofence</h2>
        <form id="geofenceForm">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <input type="hidden" name="shapeData" id="shapeData" />

            <div class="form-group">
                <input type="text" name="GeofenceName" id="GeofenceName" placeholder="Enter Geofence Name" required>
            </div>

            <div class="form-group">
                <input type="text" name="Location" id="Location" placeholder="Enter Location">
            </div>

            <div class="btn-toggle">
                <button type="button" id="circleBtn" class="toggle-btn">Circle</button>
                <button type="button" id="polygonBtn" class="toggle-btn">Polygon</button>
                <button type="button" id="rectangleBtn" class="toggle-btn">Rectangle</button>
            </div>

            <div id="circleControls" class="shape-controls">
                <label for="radiusSlider">Radius (meters): <span id="radiusValue">1000</span></label>
                <input type="range" id="radiusSlider" min="100" max="5000" value="1000" step="100">
            </div>

            <div id="rectangleControls" class="shape-controls" style="display: none;">
                <label>Draw rectangle on map by clicking and dragging</label>
            </div>

            <div id="polygonControls" class="shape-controls" style="display: none;">
                <label>Click on map to place polygon points. Double-click to complete.</label>
                <div style="color: #666; font-size: 12px; margin-top: 5px;">
                    Minimum 3 points required. Currently placed: <span id="pointCount">0</span> points
                </div>
            </div>

            <button type="submit" class="confirm-btn">Save Geofence</button>
        </form>

        <h3 class="section-title saved-geofence">Saved Geofences</h3>
        <div class="saved-geofences-container">
            <ul id="geofenceList" class="geofence-list"></ul>
        </div>
    </div>

    <div class="map-container">
        <div id="geofenceMap"></div>
    </div>
</div>
{% endblock %}