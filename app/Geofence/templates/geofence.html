{%extends "base.html"%}

{% block head %}
<title>Geofence</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="{{ url_for('Geofence.static', filename='css/style.css') }}" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<script defer src="{{ url_for('Geofence.static', filename='js/geofence.js') }}"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />
<script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
{% endblock %}

{% block h1 %}
Create Geofence
{% endblock %}

{% block block_container %}
<div class="geofence-layout">
    <!-- Left Panel -->
    <div class="geofence-panel">
        <h2>Add Geofence</h2>
        <form id="geofenceForm" action="{{ url_for('Geofence.page') }}" method="post">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <input type="hidden" name="shapeData" id="shapeData" />

            <!-- Geofence Name -->
            <div class="form-group">
                <input type="text" name="GeofenceName" id="GeofenceName" placeholder="Enter Geofence Name" required>
            </div>

            <!-- Location -->
            <div class="form-group">
                <input type="text" name="Location" id="Location" placeholder="Enter Location">
            </div>

            <!-- Circle / Polygon Buttons -->
            <div class="btn-toggle">
                <button type="button" id="circleBtn" class="toggle-btn active">Circle</button>
                <button type="button" id="polygonBtn" class="toggle-btn">Polygon</button>
            </div>

            <!-- Slider -->
            <input type="range" id="radiusSlider" min="100" max="5000" value="1000">

            <!-- Alert Settings -->
            <h3 class="section-title">Alert Settings</h3>
            <label class="switch-label">
                <input type="checkbox" id="enterAlert" name="alertType" value="enter">
                <span class="switch"></span>
                Alert when vehicle enters geofence
            </label>
            <label class="switch-label">
                <input type="checkbox" id="leaveAlert" name="alertType" value="leave">
                <span class="switch"></span>
                Alert when vehicle leaves geofence
            </label>
            <label class="switch-label">
                <input type="checkbox" id="dwellAlert" name="alertType" value="dwell">
                <span class="switch"></span>
                Alert when vehicle dwells within geofence
            </label>
            <label class="switch-label">
                <input type="checkbox" id="cameraOff" name="cameraOff">
                <span class="switch"></span>
                Turn off camera while inside geofence
            </label>

            <!-- Confirm -->
            <button type="submit" class="confirm-btn">Confirm</button>
        </form>

        <!-- Saved Geofences -->
        <h3 class="section-title">Saved Geofences</h3>
        <ul id="geofenceList"></ul>
    </div>

    <!-- Map -->
    <div class="map-container">
        <div id="map"></div>
    </div>
</div>
{% endblock %}
