{% extends "base.html" %}

{% block head %}
<title>User Configuration</title>
<link rel="stylesheet" href="{{ url_for('userConfig.static', filename='css/userConfig.css') }}">
<script src="{{ url_for('userConfig.static', filename='js/userConfig.js') }}"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js"></script>
{% endblock %}

{% block h1 %}
User Configuration
{% endblock %}

{% block block_container %}
<div class="user-config-form">
  <h2>Your Configuration</h2>
  <form id="userConfigForm">
    <div class="form-group">
      <label for="darkMode">Dark Mode</label>
      <select id="darkMode" name="darkMode">
        <option value="true" {{ 'selected' if userConfigs.darkMode == 'true' }}>True</option>
        <option value="false" {{ 'selected' if userConfigs.darkMode == 'false' }}>False</option>
      </select>
    </div>
    <div class="form-group">
      <label for="alerts">Alerts</label>
      <select id="alerts" name="alerts" multiple>
        {% set all_alert_types = [
          'panic', 'speeding', 'harsh_break', 'harsh_acceleration', 'gsm_low',
          'internal_battery_low', 'main_power_off', 'idle', 'ignition_off', 'ignition_on'
        ] %}
        {% for alert in all_alert_types %}
        <option value="{{ alert }}" {% if alert in userConfigs.alerts %}selected{% endif %}>
          {{ alert.replace('_', ' ').title() }}
        </option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="btn" id="saveConfigBtn">Save Configuration</button>
    <div class="success-message" id="successMsg" style="display:none;"></div>
    <div class="error-message" id="errorMsg" style="display:none;"></div>
  </form>
</div>
{% endblock %}