<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <link rel="stylesheet" href="{{ url_for('Vehicle.static', filename='css/vehicle.css') }}">
  <script defer src="{{ url_for('Vehicle.static', filename='js/vehicle.js') }}"></script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDEFA1-1dlca1C2BbUNKpQEf-icQAJAfX0&callback=initMap"></script>

</head>

<body>
  <div id="map" class="map"></div>
</body>

<script>
  async function initMap() {
    try {
      console.log("Initializing map...");
      const mapElement = document.getElementById("map");
      if (!mapElement) {
        console.error("Map element not found!");
        return;
      }

      const defaultCenter = { lat: 20.5937, lng: 78.9629 };
      map = new google.maps.Map(mapElement, {
        center: defaultCenter,
        zoom: 5,
        gestureHandling: "greedy",
        zoomControl: true,
        mapTypeControl: false,
        clickableIcons: false,
      });

      geocoder = new google.maps.Geocoder();
      infoWindow = new google.maps.InfoWindow();

      await restoreMarkers();
      await renderVehicles();

      console.log("Map initialized successfully");
    } catch (error) {
      console.error("Error initializing map:", error);
    }
  }

  // Make initMap globally accessible
  window.initMap = initMap;

</script>

</html>